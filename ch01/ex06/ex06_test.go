package main

import (
	"image/color"
	"os"
	"reflect"
	"testing"
)

func isExist(fileName string) bool {
	_, err := os.Stat(fileName)
	return err == nil
}

func TestMapToColor(t *testing.T) {
	palette := mapToColor()
	expected := []color.Color{
		color.RGBA{0, 0, 0, 255},
		color.RGBA{1, 2, 3, 255},
		color.RGBA{2, 4, 6, 255},
		color.RGBA{3, 6, 9, 255},
		color.RGBA{4, 8, 12, 255},
		color.RGBA{5, 10, 15, 255},
		color.RGBA{6, 12, 18, 255},
		color.RGBA{7, 14, 21, 255},
		color.RGBA{8, 16, 24, 255},
		color.RGBA{9, 18, 27, 255},
		color.RGBA{10, 20, 30, 255},
		color.RGBA{11, 22, 33, 255},
		color.RGBA{12, 24, 36, 255},
		color.RGBA{13, 26, 39, 255},
		color.RGBA{14, 28, 42, 255},
		color.RGBA{15, 30, 45, 255},
		color.RGBA{16, 32, 48, 255},
		color.RGBA{17, 34, 51, 255},
		color.RGBA{18, 36, 54, 255},
		color.RGBA{19, 38, 57, 255},
		color.RGBA{20, 40, 60, 255},
		color.RGBA{21, 42, 63, 255},
		color.RGBA{22, 44, 66, 255},
		color.RGBA{23, 46, 69, 255},
		color.RGBA{24, 48, 72, 255},
		color.RGBA{25, 50, 75, 255},
		color.RGBA{26, 52, 78, 255},
		color.RGBA{27, 54, 81, 255},
		color.RGBA{28, 56, 84, 255},
		color.RGBA{29, 58, 87, 255},
		color.RGBA{30, 60, 90, 255},
		color.RGBA{31, 62, 93, 255},
		color.RGBA{32, 64, 96, 255},
		color.RGBA{33, 66, 99, 255},
		color.RGBA{34, 68, 102, 255},
		color.RGBA{35, 70, 105, 255},
		color.RGBA{36, 72, 108, 255},
		color.RGBA{37, 74, 111, 255},
		color.RGBA{38, 76, 114, 255},
		color.RGBA{39, 78, 117, 255},
		color.RGBA{40, 80, 120, 255},
		color.RGBA{41, 82, 123, 255},
		color.RGBA{42, 84, 126, 255},
		color.RGBA{43, 86, 129, 255},
		color.RGBA{44, 88, 132, 255},
		color.RGBA{45, 90, 135, 255},
		color.RGBA{46, 92, 138, 255},
		color.RGBA{47, 94, 141, 255},
		color.RGBA{48, 96, 144, 255},
		color.RGBA{49, 98, 147, 255},
		color.RGBA{50, 100, 150, 255},
		color.RGBA{51, 102, 153, 255},
		color.RGBA{52, 104, 156, 255},
		color.RGBA{53, 106, 159, 255},
		color.RGBA{54, 108, 162, 255},
		color.RGBA{55, 110, 165, 255},
		color.RGBA{56, 112, 168, 255},
		color.RGBA{57, 114, 171, 255},
		color.RGBA{58, 116, 174, 255},
		color.RGBA{59, 118, 177, 255},
		color.RGBA{60, 120, 180, 255},
		color.RGBA{61, 122, 183, 255},
		color.RGBA{62, 124, 186, 255},
		color.RGBA{63, 126, 189, 255},
		color.RGBA{64, 128, 192, 255},
		color.RGBA{65, 130, 195, 255},
		color.RGBA{66, 132, 198, 255},
		color.RGBA{67, 134, 201, 255},
		color.RGBA{68, 136, 204, 255},
		color.RGBA{69, 138, 207, 255},
		color.RGBA{70, 140, 210, 255},
		color.RGBA{71, 142, 213, 255},
		color.RGBA{72, 144, 216, 255},
		color.RGBA{73, 146, 219, 255},
		color.RGBA{74, 148, 222, 255},
		color.RGBA{75, 150, 225, 255},
		color.RGBA{76, 152, 228, 255},
		color.RGBA{77, 154, 231, 255},
		color.RGBA{78, 156, 234, 255},
		color.RGBA{79, 158, 237, 255},
		color.RGBA{80, 160, 240, 255},
		color.RGBA{81, 162, 243, 255},
		color.RGBA{82, 164, 246, 255},
		color.RGBA{83, 166, 249, 255},
		color.RGBA{84, 168, 252, 255},
		color.RGBA{85, 170, 0, 255},
		color.RGBA{86, 172, 3, 255},
		color.RGBA{87, 174, 6, 255},
		color.RGBA{88, 176, 9, 255},
		color.RGBA{89, 178, 12, 255},
		color.RGBA{90, 180, 15, 255},
		color.RGBA{91, 182, 18, 255},
		color.RGBA{92, 184, 21, 255},
		color.RGBA{93, 186, 24, 255},
		color.RGBA{94, 188, 27, 255},
		color.RGBA{95, 190, 30, 255},
		color.RGBA{96, 192, 33, 255},
		color.RGBA{97, 194, 36, 255},
		color.RGBA{98, 196, 39, 255},
		color.RGBA{99, 198, 42, 255},
		color.RGBA{100, 200, 45, 255},
		color.RGBA{101, 202, 48, 255},
		color.RGBA{102, 204, 51, 255},
		color.RGBA{103, 206, 54, 255},
		color.RGBA{104, 208, 57, 255},
		color.RGBA{105, 210, 60, 255},
		color.RGBA{106, 212, 63, 255},
		color.RGBA{107, 214, 66, 255},
		color.RGBA{108, 216, 69, 255},
		color.RGBA{109, 218, 72, 255},
		color.RGBA{110, 220, 75, 255},
		color.RGBA{111, 222, 78, 255},
		color.RGBA{112, 224, 81, 255},
		color.RGBA{113, 226, 84, 255},
		color.RGBA{114, 228, 87, 255},
		color.RGBA{115, 230, 90, 255},
		color.RGBA{116, 232, 93, 255},
		color.RGBA{117, 234, 96, 255},
		color.RGBA{118, 236, 99, 255},
		color.RGBA{119, 238, 102, 255},
		color.RGBA{120, 240, 105, 255},
		color.RGBA{121, 242, 108, 255},
		color.RGBA{122, 244, 111, 255},
		color.RGBA{123, 246, 114, 255},
		color.RGBA{124, 248, 117, 255},
		color.RGBA{125, 250, 120, 255},
		color.RGBA{126, 252, 123, 255},
		color.RGBA{127, 254, 126, 255},
		color.RGBA{128, 1, 129, 255},
		color.RGBA{129, 3, 132, 255},
		color.RGBA{130, 5, 135, 255},
		color.RGBA{131, 7, 138, 255},
		color.RGBA{132, 9, 141, 255},
		color.RGBA{133, 11, 144, 255},
		color.RGBA{134, 13, 147, 255},
		color.RGBA{135, 15, 150, 255},
		color.RGBA{136, 17, 153, 255},
		color.RGBA{137, 19, 156, 255},
		color.RGBA{138, 21, 159, 255},
		color.RGBA{139, 23, 162, 255},
		color.RGBA{140, 25, 165, 255},
		color.RGBA{141, 27, 168, 255},
		color.RGBA{142, 29, 171, 255},
		color.RGBA{143, 31, 174, 255},
		color.RGBA{144, 33, 177, 255},
		color.RGBA{145, 35, 180, 255},
		color.RGBA{146, 37, 183, 255},
		color.RGBA{147, 39, 186, 255},
		color.RGBA{148, 41, 189, 255},
		color.RGBA{149, 43, 192, 255},
		color.RGBA{150, 45, 195, 255},
		color.RGBA{151, 47, 198, 255},
		color.RGBA{152, 49, 201, 255},
		color.RGBA{153, 51, 204, 255},
		color.RGBA{154, 53, 207, 255},
		color.RGBA{155, 55, 210, 255},
		color.RGBA{156, 57, 213, 255},
		color.RGBA{157, 59, 216, 255},
		color.RGBA{158, 61, 219, 255},
		color.RGBA{159, 63, 222, 255},
		color.RGBA{160, 65, 225, 255},
		color.RGBA{161, 67, 228, 255},
		color.RGBA{162, 69, 231, 255},
		color.RGBA{163, 71, 234, 255},
		color.RGBA{164, 73, 237, 255},
		color.RGBA{165, 75, 240, 255},
		color.RGBA{166, 77, 243, 255},
		color.RGBA{167, 79, 246, 255},
		color.RGBA{168, 81, 249, 255},
		color.RGBA{169, 83, 252, 255},
		color.RGBA{170, 85, 0, 255},
		color.RGBA{171, 87, 3, 255},
		color.RGBA{172, 89, 6, 255},
		color.RGBA{173, 91, 9, 255},
		color.RGBA{174, 93, 12, 255},
		color.RGBA{175, 95, 15, 255},
		color.RGBA{176, 97, 18, 255},
		color.RGBA{177, 99, 21, 255},
		color.RGBA{178, 101, 24, 255},
		color.RGBA{179, 103, 27, 255},
		color.RGBA{180, 105, 30, 255},
		color.RGBA{181, 107, 33, 255},
		color.RGBA{182, 109, 36, 255},
		color.RGBA{183, 111, 39, 255},
		color.RGBA{184, 113, 42, 255},
		color.RGBA{185, 115, 45, 255},
		color.RGBA{186, 117, 48, 255},
		color.RGBA{187, 119, 51, 255},
		color.RGBA{188, 121, 54, 255},
		color.RGBA{189, 123, 57, 255},
		color.RGBA{190, 125, 60, 255},
		color.RGBA{191, 127, 63, 255},
		color.RGBA{192, 129, 66, 255},
		color.RGBA{193, 131, 69, 255},
		color.RGBA{194, 133, 72, 255},
		color.RGBA{195, 135, 75, 255},
		color.RGBA{196, 137, 78, 255},
		color.RGBA{197, 139, 81, 255},
		color.RGBA{198, 141, 84, 255},
		color.RGBA{199, 143, 87, 255},
		color.RGBA{200, 145, 90, 255},
		color.RGBA{201, 147, 93, 255},
		color.RGBA{202, 149, 96, 255},
		color.RGBA{203, 151, 99, 255},
		color.RGBA{204, 153, 102, 255},
		color.RGBA{205, 155, 105, 255},
		color.RGBA{206, 157, 108, 255},
		color.RGBA{207, 159, 111, 255},
		color.RGBA{208, 161, 114, 255},
		color.RGBA{209, 163, 117, 255},
		color.RGBA{210, 165, 120, 255},
		color.RGBA{211, 167, 123, 255},
		color.RGBA{212, 169, 126, 255},
		color.RGBA{213, 171, 129, 255},
		color.RGBA{214, 173, 132, 255},
		color.RGBA{215, 175, 135, 255},
		color.RGBA{216, 177, 138, 255},
		color.RGBA{217, 179, 141, 255},
		color.RGBA{218, 181, 144, 255},
		color.RGBA{219, 183, 147, 255},
		color.RGBA{220, 185, 150, 255},
		color.RGBA{221, 187, 153, 255},
		color.RGBA{222, 189, 156, 255},
		color.RGBA{223, 191, 159, 255},
		color.RGBA{224, 193, 162, 255},
		color.RGBA{225, 195, 165, 255},
		color.RGBA{226, 197, 168, 255},
		color.RGBA{227, 199, 171, 255},
		color.RGBA{228, 201, 174, 255},
		color.RGBA{229, 203, 177, 255},
		color.RGBA{230, 205, 180, 255},
		color.RGBA{231, 207, 183, 255},
		color.RGBA{232, 209, 186, 255},
		color.RGBA{233, 211, 189, 255},
		color.RGBA{234, 213, 192, 255},
		color.RGBA{235, 215, 195, 255},
		color.RGBA{236, 217, 198, 255},
		color.RGBA{237, 219, 201, 255},
		color.RGBA{238, 221, 204, 255},
		color.RGBA{239, 223, 207, 255},
		color.RGBA{240, 225, 210, 255},
		color.RGBA{241, 227, 213, 255},
		color.RGBA{242, 229, 216, 255},
		color.RGBA{243, 231, 219, 255},
		color.RGBA{244, 233, 222, 255},
		color.RGBA{245, 235, 225, 255},
		color.RGBA{246, 237, 228, 255},
		color.RGBA{247, 239, 231, 255},
		color.RGBA{248, 241, 234, 255},
		color.RGBA{249, 243, 237, 255},
		color.RGBA{250, 245, 240, 255},
		color.RGBA{251, 247, 243, 255},
		color.RGBA{252, 249, 246, 255},
		color.RGBA{253, 251, 249, 255},
		color.RGBA{254, 253, 252, 255},
		color.RGBA{0, 0, 0, 255},
	}
	if !reflect.DeepEqual(palette, expected) {
		t.Errorf("matToColor is not work well")
	}
}

func TestLissajous(t *testing.T) {
	fileName := "test.png"
	file, err := os.Create(fileName)
	if err != nil {
		t.Errorf("%v", err)
	}
	defer file.Close()
	lissajous(file)
	if !isExist(fileName) {
		t.Errorf("%v", err)
	}
}
